<!doctype html>
<html>
  <head>
    <title>GUESS</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="jspsych-5.0.3/jspsych.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-text.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-survey-likert.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-survey-text.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-instructions.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-single-stim.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-html.js"></script>
    <link href="jspsych-5.0.3/css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body>
    <div id="jspsych-target"></div>
  </body>
  <script>

  // defining groups of questions that will go together.
  var page_1_questions = ["Which deal would you take?"];
  var trialcount = 0;
  var Prospects = [800, 40000];
  var Delays = ["immediately", "in 1 month", "in 6 months", "in 2 years", "in 5 years"];
  var Odds = ["10%", "25%", "40%", "80%", "100%"];
  var randProsp = Math.floor(Math.random() *(2-0))+0;
  var ProspectA = Prospects[randProsp]/2;
  var Adjustment = ProspectA;
  var seen = [];
  var countseen = 1;
  var seeninstructions = false;
  var participant = jsPsych.randomization.randomID(8);
  
  var check_consent = function(elem) {
  if ($('#consent_checkbox').is(':checked')) {
    return true;
  }
  else {
    alert("If you wish to participate, you must check the box next to the statement 'I agree to participate in this study.'");
    return false;
  }
  };

  var consent = {
    type:'html',
    url: "Consent_Guess.html",
    cont_btn: "start",
    check_fn: check_consent
  };
  
  
  var instruct = {
    type: 'instructions',
    pages: [
      'Thank you for agreeing to assist the Software Usability Research Laboratory (SURL). Click next to read the instructions.',
      'For this task you will be asked to make a series of choices between two hypothetical amounts of money shown on the screen.',
      'Be careful, the differences between the two amounts are subtle. Some amounts will be delayed and/or risky.',
      'Please progress through the experiment as if you were making these decisions in the real world.'
    ],
    show_clickable_nav: true
  };
    
  var game_name = {
    type: 'survey-text',
    preamble: ['<h2>Please think of a video game that you currently play or recently played and type the game title in the text field below.</h2> <p>Please type the entire name of the game (e.g., Grand Theft Auto V) and DO NOT abbreviate the official game title.</p>'],
    questions: ['The game you choose can be a game that you like or dislike. However, avoid choosing any games that you have little experience playing (e.g., a game you just started to play) OR that you have stopped playing more than 3 months ago.']
  }
  
  
  var factors = {
    Odd: Odds,
    Delay: Delays,
  };
  
  
  /*global jsPsych*/
  var full_design = jsPsych.randomization.factorial(factors,5);

  // defining groups of questions that will go together.
  var the_guess = ["I think it is easy to learn how to play the game.", 
  "I find the controls of the game to be straightforward.",
  "I always know how to achieve my goals/objectives in the game.",
  "I find the game's interface to be easy to navigate.",
  "I do not need to go through a lengthy tutorial or read a manual to play the game.",
  "I find the game's menus to be user friendly.",
  "I feel the game trains me well in all of the controls.",
  "I always know my next goal when I finish an event in the game.",
  "I feel the game provides me the necessary information to accomplish a goal within the game.",
  "I think the information provided in the game (e.g., onscreen messages, help) is clear.",
  "I feel very confident while playing the game.",
  "I think the characters in the game are well developed.",
  "I am captivated by the game's story from the beginning.",
  "I enjoy the fantasy or story provided by the game.",
  "I can identify with the characters in the game.",
  "I am emotionally moved by the events in the game.",
  "I am very interested in seeing how the events in the game will progress.",
  "I can clearly understand the game's story.",
  "I feel detached from the outside world while playing the game.",
  "I do not care to check events that are happening in the real world during the game.",
  "I cannot tell that I am getting tired while playing the game.",
  "Sometimes I lose track of time while playing the game.",
  "I temporarily forget about my everyday worries while playing the game.",
  "I tend to spend more time playing the game than I have planned.",
  "I can block out most other distractions when playing the game.",
  "Whenever I stopped playing the game I cannot wait to start playing it again.",
  "I think the game is fun.",
  "I enjoy playing the game.",
  "I feel bored while playing the game.",
  "I am likely to recommend this game to others.",
  "If given the chance, I want to play this game again.",
  "I feel the game allows me to be imaginative.",
  "I feel creative while playing the game.",
  "I feel the game gives me enough freedom to act how I want.",
  "I feel the game allows me to express myself.",
  "I feel I can explore things in the game.",
  "I feel my curiosity is stimulated as the result of playing the game.",
  "I think the game is unique or original.",
  "I enjoy the sound effects in the game.",
  "I enjoy the music in the game.",
  "I feel the game's audio (e.g., sound effects, music) enhances my gaming experience.",
  "I think the game's audio fits the mood or style of the game.",
  "I am in suspense about whether I will succeed in the game.",
  "I feel successful when I overcome the obstacles in the game.",
  "I want to do as well as possible during the game.",
  "I am very focused on my own performance while playing the game.",
  "I feel the game constantly motivates me to proceed further to the next stage or level.",
  "I find my skills gradually improve through the course of overcoming the challenges in the game.",
  "I find the game supports social interaction (e.g., chat) between players.",
  "I like to play this game with other players.",
  "I am able to play the game with other players if I choose.",
  "I enjoy the social interaction within the game.",
  "I enjoy the game's graphics.",
  "I think the graphics of the game fit the mood or style of the game.",
  "I think the game is visually appealing."
  ];
  
  var randorder = jsPsych.randomization.shuffle(the_guess);
  
  

  // definiting two different response scales that can be used.
  var page_options = ["Strongly Disagree", "Somewhat Disagree", "Disagree", "Neutral", "Somewhat Agree", "Agree", "Strongly Agree", "N/A"];
  var questions_1 = randorder.slice(0,5);
  var questions_2 = randorder.slice(5,10);
  var questions_3 = randorder.slice(10,15);
  var questions_4 = randorder.slice(15,20);
  var questions_5 = randorder.slice(20,25);
  var questions_6 = randorder.slice(25,30);
  var questions_7 = randorder.slice(30,35);
  var questions_8 = randorder.slice(35,40);
  var questions_9 = randorder.slice(40,45);
  var questions_10 = randorder.slice(45,50);
  var questions_11 = randorder.slice(50,55);

  var likert_block_1 = {
      type: 'survey-likert',
      questions: questions_1,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_2 = {
      type: 'survey-likert',
      questions: questions_2,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_3 = {
      type: 'survey-likert',
      questions: questions_3,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_4 = {
      type: 'survey-likert',
      questions: questions_4,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_5 = {
      type: 'survey-likert',
      questions: questions_5,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_6 = {
      type: 'survey-likert',
      questions: questions_6,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_7 = {
      type: 'survey-likert',
      questions: questions_7,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_8 = {
      type: 'survey-likert',
      questions: questions_8,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_9 = {
      type: 'survey-likert',
      questions: questions_9,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_10 = {
      type: 'survey-likert',
      questions: questions_10,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  var likert_block_11 = {
      type: 'survey-likert',
      questions: questions_1,
      labels: [page_options,page_options,page_options,page_options,page_options]
  };
  
  //adjust to make experiemnt shorter for testing
  
  
  

  function save_data(filename, filedata){
    $.ajax({
      type:'post',
      cache: false,
      url: 'datawrite.php', // this is the path to the above PHP script
      data: {filename: filename, filedata: filedata}
   });

  }
  
  
  var timeline = [];
  timeline.push(consent);
  timeline.push(instruct);
  timeline.push(game_name);
  timeline.push(likert_block_1);
  timeline.push(likert_block_2);
  timeline.push(likert_block_3);
  timeline.push(likert_block_4);
  timeline.push(likert_block_5);
  timeline.push(likert_block_6);
  timeline.push(likert_block_7);
  timeline.push(likert_block_8);
  timeline.push(likert_block_9);
  timeline.push(likert_block_10);
  timeline.push(likert_block_11);

  jsPsych.init({
    /*global  $*/
    display_element: $('#jspsych-target'),
    timeline: timeline,
    show_progress_bar: true,

    on_trial_finish: function() {
      if (jsPsych.currentTimelineNodeID()=='0.0-0.0' || jsPsych.currentTimelineNodeID() =='0.0-1.0'){
        seeninstructions = true;
      } else {

      }
    },

    on_finish: function() {
      save_data(participant+"data.csv",jsPsych.data.dataAsCSV());
      updateProgressBar2();

    }
  });


  </script>
</html>
