<!-- This takes data from the pilot and plots it in a div -->
<!doctype html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <link href="css/home.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body>
    <ul>
            <li><a href="index.html">Home</a></li>
            <li><a class="active" href="Experiments.html">Experiments</a></li>
            <li><a href="Contact.html">Contact</a></li>
            <li><a href="Resume.html">Resume</a></li>
    </ul>
    <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
  </body>
  <script>
    $(document).ready(function() {
      $.ajax({
          type: "POST",
          url: "/result/",
          dataType: "text",
          data: {
              html: csv
          },
          success: function(data) {
              processData("results.csv");
          }
      });
  });

  function processData(allText) {
      var allTextLines = allText.split(/\r\n|\n/);
      var headers = allTextLines[0].split(',');
      var lines = [];

      for (var i=1; i<allTextLines.length; i++) {
          var data = allTextLines[i].split(',');
          if (data.length == headers.length) {

              var tarr = [];
              for (var j=0; j<headers.length; j++) {
                  tarr.push(headers[j]+":"+data[j]);
              }
              lines.push(tarr);
          }
      }
  console.log(lines);
  }
    
    $(function () {
        Highcharts.chart('container', {
            chart: {
                type: 'line'
            },
            title: {
                text: 'Monthly Average Temperature'
            },
            subtitle: {
                text: 'Source: WorldClimate.com'
            },
            xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },
            yAxis: {
                title: {
                    text: 'Temperature (Â°C)'
                }
            },
            plotOptions: {
                line: {
                    dataLabels: {
                        enabled: true
                    },
                    enableMouseTracking: false
                }
            },
            series: [{
                name: 'Tokyo',
                data: [7.0, 6.9, 9.5, 14.5, 18.4, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
            }, {
                name: 'London',
                data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
            }]
        });
    });
  </script>
</html>




